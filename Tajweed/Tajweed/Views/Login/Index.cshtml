
@{
    ViewData["Title"] = "Index";
    Layout = "login";
}

<div class="page-content--bge5">
    <div class="container">
        <div class="login-wrap">

            <div class="login-content">
                <div class="login-logo">
                    <a href="#">
                        <h1>Tajweed Essentials</h1>
                    </a>
                </div>
                <div class="login-form">
                    <form action="" method="post">
                        <div class="form-group uname">
                            <label>Email Address</label>
                            <input class="au-input au-input--full" type="email" name="email" id="uname" placeholder="Email">
                            <span class="error"><span class=" fas fa-exclamation-circle"></span> Enter the E-mail</span>
                        </div>
                        <div class="form-group pwd">
                            <label>Password</label>
                            <input class="au-input au-input--full" type="password" name="password" id="pwd" placeholder="Password">
                            <span class="error"><span class=" fas fa-exclamation-circle"></span> Enter the Password</span>
                        </div>
                        @*<div class="login-checkbox">
                                <label>
                                    <input type="checkbox" name="remember">Remember Me
                                </label>
                                <label>
                                    <a href="#">Forgotten Password?</a>
                                </label>
                            </div>*@
                        <button class="au-btn au-btn--block au-btn--green m-b-20" id="Save" type="button">sign in</button>
                    </form>
                    <div class="register-link">
                        <p>
                            Don't you have account?
                            <a href="@Url.Action("Index","Registration")">Sign Up Here</a>
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<style>
    .error {
        color: red;
        font-size: 10px;
        display: none;
    }

    .message {
        display: none;
        position: fixed;
        z-index: 1;
    }
</style>

<script>
    $(document).ready(function () {
        $('#Save').click(function () {


            var isAllValid = true;


            if (!($('#uname').val().trim() != '')) {
                isAllValid = false;
                $('.uname .error').css('display', 'block');
            }
            else {
                $('.uname .error').css('display', 'none');
            }


            if (!($('#pwd').val().trim() != '')) {
                isAllValid = false;
                $('.pwd .error').css('display', 'block');
            }
            else {
                $('.pwd .error').css('display', 'none');
            }



            debugger

            if (isAllValid) {
                var data = {

                    username: $('#uname').val(),
                    password: $('#pwd').val(),

                }
                debugger

                $.ajax({
                    type: 'POST',
                    url: '/login/Index',
                    data: {
                        'username': data.username,
                        'password': data.password,

                    },
                    success: function (response) {
                        if (response.success) {
                            var baseUrl = "@Url.Action("Index","Dashboard")";
                            window.location.href = baseUrl;
                        }
                        else {
                            $('.message').delay(300).fadeIn();
                            $('.message').delay(200).fadeOut();
                        }
                    }

                });

            }


        })
    });
</script>

